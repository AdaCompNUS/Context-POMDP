cmake_minimum_required(VERSION 2.8.3)

#Find cuda package
cmake_minimum_required(VERSION 2.8)
find_package(CUDA QUIET REQUIRED)

# Pass options to NVCC
set(
    CUDA_NVCC_FLAGS
    ${CUDA_NVCC_FLAGS};
    -O3 -gencode arch=compute_30,code=sm_30
)

# Specify include directories
include_directories(
    kernels
    utility
)
cuda_add_library("${PROJECT_NAME}_GPU_util" SHARED
  GPUseeds.cu
  GPUrandom.cu
  GPUcoord.cu
)

target_link_libraries("${PROJECT_NAME}_GPU_util"
    ${PROJECT_NAME}
    )

install(TARGETS "${PROJECT_NAME}_GPU_util"
  EXPORT "DespotGPUTargets"
  ARCHIVE DESTINATION "${LIBRARY_INSTALL_PATH}"
  LIBRARY DESTINATION "${LIBRARY_INSTALL_PATH}"
  RUNTIME DESTINATION "${BINARY_INSTALL_PATH}"
)

